{"version":3,"kind":"Notebook","sha256":"3aaf824cc01e1ef2d67dfe7f4c0ea91b36597466da0dba29458c82c1a9032e4e","slug":"phonons","location":"/inorganic_materials/examples_tutorials/phonons.md","dependencies":[],"frontmatter":{"title":"Phonon Calculations","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.17.1"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"FAIR Chemistry & Collaborators","given":"FAIR Chemistry &","family":"Collaborators"},"name":"FAIR Chemistry & Collaborators","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/facebookresearch/fairchem","copyright":"Meta Platforms, Inc","numbering":{"title":{"offset":2}},"source_url":"https://github.com/facebookresearch/fairchem/blob/main/docs/inorganic_materials/examples_tutorials/phonons.md","edit_url":"https://github.com/facebookresearch/fairchem/edit/main/docs/inorganic_materials/examples_tutorials/phonons.md","exports":[{"format":"md","filename":"phonons.md","url":"/build/phonons-12e2f7889f1c729facbe685a3b02f2c2.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"What You Will Learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"OMr3oIsA3s"}],"key":"GAtPzuNabk"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Run phonon calculations to predict thermal conductivity, vibrational modes, entropy, and finite-temperature stability.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"VQcT6GWMZl"}],"key":"qd1F1IyXJS"}],"key":"clDIkKJiLz"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Phonon calculations are very important for inorganic materials science to","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"cgVHCcWlBw"}],"key":"EwHjwNSxcM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate thermal conductivity","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"CC2l7LKfxa"}],"key":"JZMtzJhgDO"}],"key":"W5wEVB7ory"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand the vibrational modes, and thus entropy and free energy, of a material","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"eslqPjEmi2"}],"key":"yFhXwWsIHL"}],"key":"WNzYHp5oj5"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Predict the stability of a material at finite temperature (e.g. 300 K)\namong many others!\nWe can run a similarly straightforward calculation that","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"lHFkQptyFv"}],"key":"ZXKMH2ab5I"}],"key":"T0qIVYUTTn"}],"key":"VV9h4K9OV9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Runs a relaxation on the unit cell and atoms","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"wfM0nKCKz0"}],"key":"loCLps8btu"}],"key":"EMWVePCAsy"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Repeats the unit cell a number of times to make it sufficiently large to capture many interesting vibrational models","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"uwv3I12x5D"}],"key":"nHa0Xhatbd"}],"key":"yhJGEQWzaB"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generatives a number of finite displacement structures by moving each atom of the unit cell a little bit in each direction","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"K5Kgh9PSsu"}],"key":"r84EsAW1C2"}],"key":"p6SQ3yCbXl"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Running single point calculations on each of (3)","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"n7g7FOkC9C"}],"key":"VhuwAvSAGh"}],"key":"cw6u4lNLtj"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gathering all of the calculations and calculating second derivatives (the hessian matrix!)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"Ew4aBkwueI"}],"key":"QB3Fx48z5r"}],"key":"u24rgoq8Tb"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculating the eigenvalues/eigenvectors of the hessian matrix to find the vibrational modes of the material","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"PajS8nM6lL"}],"key":"AaIqGnnuIT"}],"key":"YLWkKznIU1"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Analyzing the thermodynamic properties of the vibrational modes.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"j1Etq7Dsbq"}],"key":"Sqe5XUgx9F"}],"key":"UrytLV0uW8"}],"key":"gKfVAm2qJy"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Note that this analysis assumes that all vibrational modes are harmonic, which is a pretty reasonable approximately for low/moderate temperature materials, but becomes less realistic at high temperatures.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"PVjOWv5nXg"}],"key":"oF3Jjhwk4D"}],"key":"BAzqt1dYbW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations\n\nfrom ase.build import bulk\nfrom quacc.recipes.mlp.phonons import phonon_flow\n\n# Make an Atoms object of a bulk Cu structure\natoms = bulk(\"Cu\")\n\n# Run a phonon (hessian) calculation with our favorite MLP potential\nresult = phonon_flow(\n    atoms,\n    method=\"fairchem\",\n    job_params={\n        \"all\": dict(\n            name_or_path=\"uma-s-1p1\",\n            task_name=\"omat\",\n        ),\n    },\n    min_lengths=10.0,  # set the minimum unit cell size smaller to be compatible with limited github runner ram\n)","key":"AB9x3NtW4t"},{"type":"outputs","id":"R6K72ul8LpZ33uzmwC9Bi","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/checkpoints/uma-s-1p1.pt \"HTTP/1.1 302 Found\"\n"},"key":"LHFBPOZedH"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/iso_atom_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"liXMfi21m1"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/form_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"PSQg3wREor"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:device was not explicitly set, using device='cuda'.\n"},"key":"I53k8wvk1c"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:The 'seed' argument is deprecated and will be removed in future versions. Please set the seed in the MLIPPredictUnit configuration instead.\n"},"key":"wOBLox5dUI"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-02-12-20-39-23-783377-59941\n"},"key":"gEju09Sedw"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-02-12-20-39-23-783377-59941\n"},"key":"zTJXsHZZqB"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-02-12-20-39-25-984208-53545\n"},"key":"dvr5hE95ox"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-02-12-20-39-25-984208-53545\n"},"key":"qlr4zaFOTN"}],"key":"JvD2Q2zkpf"}],"key":"zFFcrlGwd2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(\n    f'The entropy at { result[\"results\"][\"thermal_properties\"][\"temperatures\"][-1]:.0f} K is { result[\"results\"][\"thermal_properties\"][\"entropy\"][-1]:.2f} kJ/mol'\n)","key":"T0Kqe05aEH"},{"type":"outputs","id":"m0DyBdGYewhVGAJuJhQIM","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The entropy at 1000 K is 61.83 kJ/mol\n"},"key":"Fmjd3J4Tac"}],"key":"LXLAq2kS8X"}],"key":"qpH7pXRgaP"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Congratulations, you ran your first phonon calculation!","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"fObjUI2DtR"}],"key":"MZPhyl0lmQ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Need to install fairchem-core or get UMA access or getting permissions/401 errors?","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"ZmC8EMAc40"}],"key":"roF9bVGyAl"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the necessary packages using pip, uv etc","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"v5DNaAGKhW"}],"key":"HxqlCa2XW9"}],"key":"P1ETounuVe"}],"key":"DGaI1tfBk0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"! pip install fairchem-core fairchem-data-oc fairchem-applications-cattsunami","visibility":"show","key":"afEGAmXlxI"},{"type":"outputs","id":"RahfGss_M8_kYGDmoM8N5","children":[],"visibility":"show","key":"u1QLbJTL8d"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"e2bJMn6GNT"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get access to any necessary huggingface gated models","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"sxhTfzVarV"}],"key":"PKzNR1gSsB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":79,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get and login to your Huggingface account","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"sO9rmrxqMK"}],"key":"cd3JR9pc1O"}],"key":"P6K7ObegCJ"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request access to ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"YW1Q8sFg57"},{"type":"link","url":"https://huggingface.co/facebook/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/facebook​/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"lLQUJgqSXt"}],"urlSource":"https://huggingface.co/facebook/UMA","key":"UHyoHz1Y5n"}],"key":"gcpMKC3YOL"}],"key":"wx9UHJ0Z30"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a Huggingface token at ","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"yUXKp3QQpg"},{"type":"link","url":"https://huggingface.co/settings/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/settings​/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"lb71DK5C2t"}],"urlSource":"https://huggingface.co/settings/tokens/","key":"QWw6XiK1P0"},{"type":"text","value":" with the permission “Permissions: Read access to contents of all public gated repos you can access”","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"XWVqcwnr97"}],"key":"V7SmWzd25O"}],"key":"MjgWEXw78L"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the token as an environment variable using ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"ToDUwNjr3G"},{"type":"inlineCode","value":"huggingface-cli login","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"eXdTgXJ7dW"},{"type":"text","value":" or by setting the HF_TOKEN environment variable.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"wrAYCJRZFE"}],"key":"Iqj8IxMXIu"}],"key":"vxWxaDsh95"}],"key":"TAJr28LrCE"}],"key":"tzITsyjrih"}],"key":"h6XKBaFiIb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Login using the huggingface-cli utility\n! huggingface-cli login\n\n# alternatively,\nimport os\nos.environ['HF_TOKEN'] = 'MY_TOKEN'","visibility":"show","key":"MdxVKcFQhg"},{"type":"outputs","id":"_D3JeAkzAJnkHgtdjgyTg","children":[],"visibility":"show","key":"C14pROEBn8"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"dV0X8U8T1r"}],"class":"dropdown","key":"qDmRbguvEq"}],"key":"FQatNveQMp"}],"key":"Kv58FIQXsI"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Formation Energy","url":"/formation-energy","group":"Inorganic Materials"},"next":{"title":"Elastic Tensors","url":"/elastic","group":"Inorganic Materials"}}},"domain":"http://localhost:3000"}