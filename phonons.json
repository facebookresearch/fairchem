{"version":3,"kind":"Notebook","sha256":"3aaf824cc01e1ef2d67dfe7f4c0ea91b36597466da0dba29458c82c1a9032e4e","slug":"phonons","location":"/inorganic_materials/examples_tutorials/phonons.md","dependencies":[],"frontmatter":{"title":"Phonon Calculations","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.17.1"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"FAIR Chemistry & Collaborators","given":"FAIR Chemistry &","family":"Collaborators"},"name":"FAIR Chemistry & Collaborators","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/facebookresearch/fairchem","copyright":"Meta Platforms, Inc","numbering":{"title":{"offset":2}},"source_url":"https://github.com/facebookresearch/fairchem/blob/main/docs/inorganic_materials/examples_tutorials/phonons.md","edit_url":"https://github.com/facebookresearch/fairchem/edit/main/docs/inorganic_materials/examples_tutorials/phonons.md","exports":[{"format":"md","filename":"phonons.md","url":"/build/phonons-e50dd358026bb843a3c611f9358ea5d2.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"What You Will Learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"oWU5lfEncm"}],"key":"m6s6L1AxOT"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Run phonon calculations to predict thermal conductivity, vibrational modes, entropy, and finite-temperature stability.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"zYjf1Jyz1r"}],"key":"MQCDyhHs2R"}],"key":"McC7BVFS27"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Phonon calculations are very important for inorganic materials science to","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"L9SWKABmIY"}],"key":"z8oa9if540"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate thermal conductivity","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Dhog2FfOFd"}],"key":"n6HZAiBPRX"}],"key":"TxL6qWMvfY"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand the vibrational modes, and thus entropy and free energy, of a material","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"lrDOCyJXAt"}],"key":"eyBKedgW43"}],"key":"NkQ3O4L6n7"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Predict the stability of a material at finite temperature (e.g. 300 K)\namong many others!\nWe can run a similarly straightforward calculation that","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"VW95Mr0OJJ"}],"key":"qMFCz7aOvy"}],"key":"KrLvKyQDvU"}],"key":"XTh9qpzUBX"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Runs a relaxation on the unit cell and atoms","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"kWDJSIgQVy"}],"key":"UNBk8Qh2B4"}],"key":"O2RcJZxwp6"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Repeats the unit cell a number of times to make it sufficiently large to capture many interesting vibrational models","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ihLDqYHFlz"}],"key":"LQ7ZGF2Nb7"}],"key":"oOgXEb653d"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generatives a number of finite displacement structures by moving each atom of the unit cell a little bit in each direction","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ATAv4EkRAd"}],"key":"H3FBmygSom"}],"key":"qUWB5GmtPr"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Running single point calculations on each of (3)","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"QUykvYUUUA"}],"key":"Hda4rzWZqi"}],"key":"rAjgOOsFp8"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gathering all of the calculations and calculating second derivatives (the hessian matrix!)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"NHtNexNExj"}],"key":"HiY5jaLT4B"}],"key":"dfXILXODjI"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculating the eigenvalues/eigenvectors of the hessian matrix to find the vibrational modes of the material","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"gL2ExPgyDv"}],"key":"BXxJAXcpOK"}],"key":"THTSowQye1"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Analyzing the thermodynamic properties of the vibrational modes.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"HNDlEjxm2V"}],"key":"oJVPU9GNrq"}],"key":"OCB0LILNFC"}],"key":"Xq7CPabAKS"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Note that this analysis assumes that all vibrational modes are harmonic, which is a pretty reasonable approximately for low/moderate temperature materials, but becomes less realistic at high temperatures.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"Lf46O822kB"}],"key":"imXJoxHXFA"}],"key":"frzRKDAmUr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations\n\nfrom ase.build import bulk\nfrom quacc.recipes.mlp.phonons import phonon_flow\n\n# Make an Atoms object of a bulk Cu structure\natoms = bulk(\"Cu\")\n\n# Run a phonon (hessian) calculation with our favorite MLP potential\nresult = phonon_flow(\n    atoms,\n    method=\"fairchem\",\n    job_params={\n        \"all\": dict(\n            name_or_path=\"uma-s-1p1\",\n            task_name=\"omat\",\n        ),\n    },\n    min_lengths=10.0,  # set the minimum unit cell size smaller to be compatible with limited github runner ram\n)","key":"z23VcdYXTK"},{"type":"outputs","id":"nM4cR9cryVrPmgHDW3aO8","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/checkpoints/uma-s-1p1.pt \"HTTP/1.1 302 Found\"\n"},"key":"CWOSPdehsi"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/iso_atom_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"Ok2x35qbzW"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/form_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"tBhH2sk7kv"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:device was not explicitly set, using device='cuda'.\n"},"key":"aQ5WRnRtmf"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:The 'seed' argument is deprecated and will be removed in future versions. Please set the seed in the MLIPPredictUnit configuration instead.\n"},"key":"X8tBMSvAXM"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-01-29-19-08-39-163664-59941\n"},"key":"Ch86OLyUit"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-01-29-19-08-39-163664-59941\n"},"key":"M1L4DHse3G"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-01-29-19-08-40-642225-53545\n"},"key":"daTS4Fu2p3"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-01-29-19-08-40-642225-53545\n"},"key":"UzIjIGGH7W"}],"key":"V4IchplQjg"}],"key":"sTAwZXTH09"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(\n    f'The entropy at { result[\"results\"][\"thermal_properties\"][\"temperatures\"][-1]:.0f} K is { result[\"results\"][\"thermal_properties\"][\"entropy\"][-1]:.2f} kJ/mol'\n)","key":"lXENuSo43p"},{"type":"outputs","id":"ExriDfo10EFPdd-dn-8YD","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The entropy at 1000 K is 61.83 kJ/mol\n"},"key":"ONAun9w2ir"}],"key":"ct20gM04iB"}],"key":"y5o5YjBOp3"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Congratulations, you ran your first phonon calculation!","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"D2GkP0fRCN"}],"key":"nB8bqAyfFL"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Need to install fairchem-core or get UMA access or getting permissions/401 errors?","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"mMJfcLvsDw"}],"key":"mQNog1oNMF"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the necessary packages using pip, uv etc","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"HynCKB6BUM"}],"key":"OWd8JuwkFf"}],"key":"q6n5GZ9mze"}],"key":"Xshg800nnT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"! pip install fairchem-core fairchem-data-oc fairchem-applications-cattsunami","visibility":"show","key":"fSKwNNMVL5"},{"type":"outputs","id":"Agb9KttP-HWOC-yYi19g8","children":[],"visibility":"show","key":"U3FzGbtCsK"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"B4rfJBrw4e"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get access to any necessary huggingface gated models","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"rGs7abgcCg"}],"key":"uvNticSu2X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":79,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get and login to your Huggingface account","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"bgOzOKTEYs"}],"key":"oreVlDcSof"}],"key":"DTvEX8f6d2"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request access to ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"I43hoNGkr0"},{"type":"link","url":"https://huggingface.co/facebook/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/facebook​/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"mrME1nDKOR"}],"urlSource":"https://huggingface.co/facebook/UMA","key":"yV49H3e8mM"}],"key":"Yu5KlNmtV1"}],"key":"RzrfRRIfgd"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a Huggingface token at ","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"jioztChkrO"},{"type":"link","url":"https://huggingface.co/settings/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/settings​/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"MArPzVSsWn"}],"urlSource":"https://huggingface.co/settings/tokens/","key":"m2ZheP9L5C"},{"type":"text","value":" with the permission “Permissions: Read access to contents of all public gated repos you can access”","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"b5Vz0fcJE6"}],"key":"TWPwATW1rh"}],"key":"WboxvJN7U9"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the token as an environment variable using ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"cVy5qTDghl"},{"type":"inlineCode","value":"huggingface-cli login","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"bNwvrb6FNU"},{"type":"text","value":" or by setting the HF_TOKEN environment variable.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"ppUWYGo6p1"}],"key":"qYcJh4CMaw"}],"key":"c6arjYM9bu"}],"key":"qvfdILau43"}],"key":"SHwGYnWlQg"}],"key":"YU5JJcJG6v"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Login using the huggingface-cli utility\n! huggingface-cli login\n\n# alternatively,\nimport os\nos.environ['HF_TOKEN'] = 'MY_TOKEN'","visibility":"show","key":"JjhYq1nFrN"},{"type":"outputs","id":"GAuU8ngwhnGDFM8T_iwVO","children":[],"visibility":"show","key":"ZJxXTXG5Uh"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"Jk0BWwdgnz"}],"class":"dropdown","key":"bxnW7VuVmw"}],"key":"STjt0TBHNA"}],"key":"gcHezAEzFU"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Formation Energy","url":"/formation-energy","group":"Inorganic Materials"},"next":{"title":"Elastic Tensors","url":"/elastic","group":"Inorganic Materials"}}},"domain":"http://localhost:3000"}