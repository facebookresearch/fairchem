{"version":3,"kind":"Notebook","sha256":"3aaf824cc01e1ef2d67dfe7f4c0ea91b36597466da0dba29458c82c1a9032e4e","slug":"phonons","location":"/inorganic_materials/examples_tutorials/phonons.md","dependencies":[],"frontmatter":{"title":"Phonon Calculations","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.17.1"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"FAIR Chemistry & Collaborators","given":"FAIR Chemistry &","family":"Collaborators"},"name":"FAIR Chemistry & Collaborators","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/facebookresearch/fairchem","copyright":"Meta Platforms, Inc","numbering":{"title":{"offset":2}},"source_url":"https://github.com/facebookresearch/fairchem/blob/main/docs/inorganic_materials/examples_tutorials/phonons.md","edit_url":"https://github.com/facebookresearch/fairchem/edit/main/docs/inorganic_materials/examples_tutorials/phonons.md","exports":[{"format":"md","filename":"phonons.md","url":"/build/phonons-520f11b7a97a69513a7e57997c81319d.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"What You Will Learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"D72yAlvIWQ"}],"key":"BXZeUmMvCi"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Run phonon calculations to predict thermal conductivity, vibrational modes, entropy, and finite-temperature stability.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"j0jaULRIaQ"}],"key":"dpjYSTpiv9"}],"key":"yLORETeZQp"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Phonon calculations are very important for inorganic materials science to","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"yg7xkcIpDe"}],"key":"O877zACBXC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate thermal conductivity","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"lU8TWLXKep"}],"key":"R4YmRkneAu"}],"key":"cGEn7nZhHg"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand the vibrational modes, and thus entropy and free energy, of a material","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"O0uGeFXgp7"}],"key":"w5JeNJYJ6Z"}],"key":"px3GXNN1vq"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Predict the stability of a material at finite temperature (e.g. 300 K)\namong many others!\nWe can run a similarly straightforward calculation that","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"VDB15JNxsj"}],"key":"cJe7j3s9L0"}],"key":"ZLm94hK8Ym"}],"key":"HRV0YZL468"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Runs a relaxation on the unit cell and atoms","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"QV0838dZfu"}],"key":"gsOoK0YntV"}],"key":"sq7mYccuse"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Repeats the unit cell a number of times to make it sufficiently large to capture many interesting vibrational models","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"gkaYPDJeRk"}],"key":"Z2RwtNGLYU"}],"key":"jzGjfMglLM"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generatives a number of finite displacement structures by moving each atom of the unit cell a little bit in each direction","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"CadHC4o215"}],"key":"NI8zWoxprk"}],"key":"yZ9fI8TvfM"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Running single point calculations on each of (3)","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"YseqdCX0VX"}],"key":"aouL3JWP6H"}],"key":"s3UC3jOapj"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gathering all of the calculations and calculating second derivatives (the hessian matrix!)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"DrW1syvvEw"}],"key":"ebrN92j5FV"}],"key":"OslrDRFZmY"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculating the eigenvalues/eigenvectors of the hessian matrix to find the vibrational modes of the material","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"TkftA88qxZ"}],"key":"c8YW71pXUO"}],"key":"ffhCUqKVD9"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Analyzing the thermodynamic properties of the vibrational modes.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"VHATXvagFx"}],"key":"u2ZltLvuZo"}],"key":"aeRsaG4vnD"}],"key":"bhHASv9Nho"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Note that this analysis assumes that all vibrational modes are harmonic, which is a pretty reasonable approximately for low/moderate temperature materials, but becomes less realistic at high temperatures.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"YlRG0pOMb0"}],"key":"zgvvxaUfgH"}],"key":"K7povuBZ56"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations\n\nfrom ase.build import bulk\nfrom quacc.recipes.mlp.phonons import phonon_flow\n\n# Make an Atoms object of a bulk Cu structure\natoms = bulk(\"Cu\")\n\n# Run a phonon (hessian) calculation with our favorite MLP potential\nresult = phonon_flow(\n    atoms,\n    method=\"fairchem\",\n    job_params={\n        \"all\": dict(\n            name_or_path=\"uma-s-1p1\",\n            task_name=\"omat\",\n        ),\n    },\n    min_lengths=10.0,  # set the minimum unit cell size smaller to be compatible with limited github runner ram\n)","key":"vDGpMCPTdm"},{"type":"outputs","id":"ACP8xBmCsW9ZtjtDGIDkR","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/checkpoints/uma-s-1p1.pt \"HTTP/1.1 302 Found\"\n"},"key":"xa7TBoL4Ig"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/iso_atom_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"OlJFEMMxCl"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/form_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"Q60qdhhr29"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:device was not explicitly set, using device='cuda'.\n"},"key":"f7NbTqZzNu"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:If 'dataset_list' is provided in the config, the code assumes that each dataset maps to itself. Please use 'dataset_mapping' as 'dataset_list' is deprecated and will be removed in the future.\n"},"key":"DTzu1jFqXy"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:The 'seed' argument is deprecated and will be removed in future versions. Please set the seed in the MLIPPredictUnit configuration instead.\n"},"key":"lGbhkJSKBG"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-02-20-23-04-39-965765-59941\n"},"key":"sf2Ffg5M3K"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-02-20-23-04-39-965765-59941\n"},"key":"qPQ7uV0769"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-02-20-23-04-41-498238-53545\n"},"key":"UfJoZZeyxf"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-02-20-23-04-41-498238-53545\n"},"key":"N9dod0kNoe"}],"key":"Ap0JrI7pUL"}],"key":"kjLuLdnvYJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(\n    f'The entropy at { result[\"results\"][\"thermal_properties\"][\"temperatures\"][-1]:.0f} K is { result[\"results\"][\"thermal_properties\"][\"entropy\"][-1]:.2f} kJ/mol'\n)","key":"w0dTAjK59z"},{"type":"outputs","id":"26mL8tEtwLpq_nrJmJbmM","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The entropy at 1000 K is 61.83 kJ/mol\n"},"key":"HRLJlKk85c"}],"key":"jkMp3V0ebh"}],"key":"jmlsL1FwT1"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Congratulations, you ran your first phonon calculation!","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"rHuE11TSH5"}],"key":"h1Tuo6ea0i"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Need to install fairchem-core or get UMA access or getting permissions/401 errors?","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"HPCyUvo03n"}],"key":"j9CxBKAQzW"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the necessary packages using pip, uv etc","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"waDIk3Ggia"}],"key":"l4ChvreS6F"}],"key":"OJ717UpDVq"}],"key":"YnM2ZIpj0R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"! pip install fairchem-core fairchem-data-oc fairchem-applications-cattsunami","visibility":"show","key":"p7OE2MEqjk"},{"type":"outputs","id":"LHDogV-oA_nOEwi5echO1","children":[],"visibility":"show","key":"rjusFLxVHC"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"lH3SwGwOs0"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get access to any necessary huggingface gated models","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"B0nUm1gfar"}],"key":"n4YmDXzXaR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":79,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get and login to your Huggingface account","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"LO0xj08YJc"}],"key":"SOx3e6H2AQ"}],"key":"KjfH9WFx7W"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request access to ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"TIGv3di37k"},{"type":"link","url":"https://huggingface.co/facebook/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/facebook​/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"pDJn7cNF56"}],"urlSource":"https://huggingface.co/facebook/UMA","key":"a8vaNJkShe"}],"key":"hrMCNN0W0A"}],"key":"ACQAeDOhcH"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a Huggingface token at ","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"s9RBQDKBZd"},{"type":"link","url":"https://huggingface.co/settings/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/settings​/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"s4hH0uVHcM"}],"urlSource":"https://huggingface.co/settings/tokens/","key":"WPOSea2vy6"},{"type":"text","value":" with the permission “Permissions: Read access to contents of all public gated repos you can access”","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"zeJoPWMrVf"}],"key":"tMP0ksotwK"}],"key":"TpR4fsBuby"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the token as an environment variable using ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"SkyqGSzwgL"},{"type":"inlineCode","value":"huggingface-cli login","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"SzgymIhRM1"},{"type":"text","value":" or by setting the HF_TOKEN environment variable.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"wZzyXNeXIK"}],"key":"TXvM16IhPg"}],"key":"e3aSVj67Xe"}],"key":"FyWkH1jhmv"}],"key":"VAIB5mhryQ"}],"key":"psCThTQ20M"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Login using the huggingface-cli utility\n! huggingface-cli login\n\n# alternatively,\nimport os\nos.environ['HF_TOKEN'] = 'MY_TOKEN'","visibility":"show","key":"mfL5jlR87b"},{"type":"outputs","id":"_KRSX9uamKYgw6XCnmUD7","children":[],"visibility":"show","key":"IQOvQuUt6V"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"hlth3IK7xu"}],"class":"dropdown","key":"bqvyTar7Ru"}],"key":"PDfM3bZUrQ"}],"key":"OPjXz3KcX8"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Formation Energy","url":"/formation-energy","group":"Inorganic Materials"},"next":{"title":"Elastic Tensors","url":"/elastic","group":"Inorganic Materials"}}},"domain":"http://localhost:3000"}