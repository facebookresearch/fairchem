{"version":3,"kind":"Notebook","sha256":"3aaf824cc01e1ef2d67dfe7f4c0ea91b36597466da0dba29458c82c1a9032e4e","slug":"phonons","location":"/inorganic_materials/examples_tutorials/phonons.md","dependencies":[],"frontmatter":{"title":"Phonon Calculations","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.17.1"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"FAIR Chemistry & Collaborators","given":"FAIR Chemistry &","family":"Collaborators"},"name":"FAIR Chemistry & Collaborators","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/facebookresearch/fairchem","copyright":"Meta Platforms, Inc","numbering":{"title":{"offset":2}},"source_url":"https://github.com/facebookresearch/fairchem/blob/main/docs/inorganic_materials/examples_tutorials/phonons.md","edit_url":"https://github.com/facebookresearch/fairchem/edit/main/docs/inorganic_materials/examples_tutorials/phonons.md","exports":[{"format":"md","filename":"phonons.md","url":"/build/phonons-82efbcc507a711852d468155608a9e9e.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"What You Will Learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"QDo2DWG9op"}],"key":"t2eRZQvNZf"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Run phonon calculations to predict thermal conductivity, vibrational modes, entropy, and finite-temperature stability.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Oe7W39wPG2"}],"key":"dcvySB5Ro1"}],"key":"izB3BGqDzu"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Phonon calculations are very important for inorganic materials science to","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"hCUtHAt6U2"}],"key":"r41VFfjaLO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate thermal conductivity","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"MHlI0iCQsv"}],"key":"E4ZsxsB250"}],"key":"lfgFfjgHAJ"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand the vibrational modes, and thus entropy and free energy, of a material","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"CswebyjuoR"}],"key":"cV4vsDeopM"}],"key":"dcKs7pGUPi"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Predict the stability of a material at finite temperature (e.g. 300 K)\namong many others!\nWe can run a similarly straightforward calculation that","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"AfeTO2dv2p"}],"key":"zBcqmyFQ43"}],"key":"i9FTSenAjp"}],"key":"dikgkvtDH0"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Runs a relaxation on the unit cell and atoms","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"EVZMSnIMSS"}],"key":"OvtRA76QfY"}],"key":"Xbe3Lx6xnJ"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Repeats the unit cell a number of times to make it sufficiently large to capture many interesting vibrational models","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"AFg0N6bnbT"}],"key":"ZiBPDwZEOB"}],"key":"zRsEOI6469"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generatives a number of finite displacement structures by moving each atom of the unit cell a little bit in each direction","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"tp0eJMjgcN"}],"key":"kZFLjFTWUi"}],"key":"WANyRSsrig"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Running single point calculations on each of (3)","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"WOplP7qfQK"}],"key":"nHc8NOjEDK"}],"key":"kIxkkyjxyt"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gathering all of the calculations and calculating second derivatives (the hessian matrix!)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"jdvORGBxZy"}],"key":"ZTeqWHvKaN"}],"key":"P3lNr1X1nI"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculating the eigenvalues/eigenvectors of the hessian matrix to find the vibrational modes of the material","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"VcleJlOFgd"}],"key":"ucj6TJqfWf"}],"key":"oOKsoe0cQ6"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Analyzing the thermodynamic properties of the vibrational modes.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"dta7OFb3my"}],"key":"F3zGeVlWJQ"}],"key":"p8Xsy7fHne"}],"key":"VHfEHDbzIV"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Note that this analysis assumes that all vibrational modes are harmonic, which is a pretty reasonable approximately for low/moderate temperature materials, but becomes less realistic at high temperatures.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"a4MwKasRMi"}],"key":"Rlw3ApzIf9"}],"key":"eeKA1oEibI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations\n\nfrom ase.build import bulk\nfrom quacc.recipes.mlp.phonons import phonon_flow\n\n# Make an Atoms object of a bulk Cu structure\natoms = bulk(\"Cu\")\n\n# Run a phonon (hessian) calculation with our favorite MLP potential\nresult = phonon_flow(\n    atoms,\n    method=\"fairchem\",\n    job_params={\n        \"all\": dict(\n            name_or_path=\"uma-s-1p1\",\n            task_name=\"omat\",\n        ),\n    },\n    min_lengths=10.0,  # set the minimum unit cell size smaller to be compatible with limited github runner ram\n)","key":"Uwnsw2MJd3"},{"type":"outputs","id":"vEurU9l1tGVRahaICAvT7","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/checkpoints/uma-s-1p1.pt \"HTTP/1.1 302 Found\"\n"},"key":"qmnfc1Z0wG"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/iso_atom_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"ZsPhlBwH7k"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:httpx:HTTP Request: HEAD https://huggingface.co/facebook/UMA/resolve/main/references/form_elem_refs.yaml \"HTTP/1.1 200 OK\"\n"},"key":"hkIP4tHsTM"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:device was not explicitly set, using device='cuda'.\n"},"key":"Nggqrny3S9"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"WARNING:root:The 'seed' argument is deprecated and will be removed in future versions. Please set the seed in the MLIPPredictUnit configuration instead.\n"},"key":"VXe3dlGbpW"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-01-29-16-22-42-145675-59941\n"},"key":"WafNf8VCPV"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-01-29-16-22-42-145675-59941\n"},"key":"pao8jumvOC"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation will run at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/tmp-quacc-2026-01-29-16-22-43-868109-53545\n"},"key":"WeSUwmYOzr"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stderr","text":"INFO:quacc.runners.prep:Calculation results stored at /home/runner/work/fairchem/fairchem/docs/inorganic_materials/examples_tutorials/quacc-2026-01-29-16-22-43-868109-53545\n"},"key":"HUPfBHaR6E"}],"key":"Nvy6PyFr8Q"}],"key":"BszcEzqw3x"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(\n    f'The entropy at { result[\"results\"][\"thermal_properties\"][\"temperatures\"][-1]:.0f} K is { result[\"results\"][\"thermal_properties\"][\"entropy\"][-1]:.2f} kJ/mol'\n)","key":"xuMZ9TeC4n"},{"type":"outputs","id":"4n_fq3haV22xYs3rsEy2I","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"The entropy at 1000 K is 61.83 kJ/mol\n"},"key":"VciDAg7Rxd"}],"key":"oDaHUonBKv"}],"key":"Ta1wHns2UY"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Congratulations, you ran your first phonon calculation!","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"RVhvEdIvKB"}],"key":"JQbbmjrNtc"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Need to install fairchem-core or get UMA access or getting permissions/401 errors?","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"vmfkPqIWZT"}],"key":"OQZV073m78"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the necessary packages using pip, uv etc","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"H6yZcZFD46"}],"key":"OCcuo2cKfK"}],"key":"OrplP2Gn27"}],"key":"cziJsjc59R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"! pip install fairchem-core fairchem-data-oc fairchem-applications-cattsunami","visibility":"show","key":"j8Dioh9UtM"},{"type":"outputs","id":"P8z9lRf0AYtLfX0M8Vvy0","children":[],"visibility":"show","key":"SH0i2QdFdX"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"I7K0CSzSEC"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":78,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get access to any necessary huggingface gated models","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"CnPv0b0VLB"}],"key":"PeFBDqfUC3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":79,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get and login to your Huggingface account","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"GWeN9a25mH"}],"key":"lVDO8dWtZD"}],"key":"OadMnmgkEr"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request access to ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"fMfpv0sWHR"},{"type":"link","url":"https://huggingface.co/facebook/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/facebook​/UMA","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"WIe5U95CTG"}],"urlSource":"https://huggingface.co/facebook/UMA","key":"a4TNEPZG7J"}],"key":"RvZafYWYu8"}],"key":"HdNCuyc3an"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a Huggingface token at ","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"xowKtdU5Zj"},{"type":"link","url":"https://huggingface.co/settings/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/settings​/tokens/","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"tHQ9LdRfms"}],"urlSource":"https://huggingface.co/settings/tokens/","key":"aaFYNeWXSv"},{"type":"text","value":" with the permission “Permissions: Read access to contents of all public gated repos you can access”","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"S4ahVksBsB"}],"key":"ip3eEOmaVp"}],"key":"TBOXiuLX8y"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the token as an environment variable using ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"UddgNBkKF0"},{"type":"inlineCode","value":"huggingface-cli login","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"f9wnVbTK1L"},{"type":"text","value":" or by setting the HF_TOKEN environment variable.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"UhkLMaewRp"}],"key":"YXGU8wh2Vg"}],"key":"Aek0OMEWvm"}],"key":"TWmuBbrkeR"}],"key":"Pnut1fdVeS"}],"key":"R7eaF34jQx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Login using the huggingface-cli utility\n! huggingface-cli login\n\n# alternatively,\nimport os\nos.environ['HF_TOKEN'] = 'MY_TOKEN'","visibility":"show","key":"GIWEvSBZic"},{"type":"outputs","id":"24iC2TTl43eJ2v_6FTeo_","children":[],"visibility":"show","key":"fzN1qcUFp3"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"Rlw9SS6K0y"}],"class":"dropdown","key":"tGP7yJCD9t"}],"key":"ezk3s9mvrb"}],"key":"CBekg9RPYU"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Formation Energy","url":"/formation-energy","group":"Inorganic Materials"},"next":{"title":"Elastic Tensors","url":"/elastic","group":"Inorganic Materials"}}},"domain":"http://localhost:3000"}