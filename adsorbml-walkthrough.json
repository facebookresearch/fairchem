{"version":3,"kind":"Notebook","sha256":"a946d4d7353ecef16d099b6edc9b406de394e8bb8c2edcb1be14296bbbba9e7c","slug":"adsorbml-walkthrough","location":"/catalysts/examples_tutorials/adsorbml_walkthrough.md","dependencies":[],"frontmatter":{"title":"AdsorbML Tutorial","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.17.1"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"FAIR Chemistry & Collaborators","given":"FAIR Chemistry &","family":"Collaborators"},"name":"FAIR Chemistry & Collaborators","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/facebookresearch/fairchem","copyright":"Meta Platforms, Inc","numbering":{"title":{"offset":2}},"source_url":"https://github.com/facebookresearch/fairchem/blob/main/docs/catalysts/examples_tutorials/adsorbml_walkthrough.md","edit_url":"https://github.com/facebookresearch/fairchem/edit/main/docs/catalysts/examples_tutorials/adsorbml_walkthrough.md","exports":[{"format":"md","filename":"adsorbml_walkthrough.md","url":"/build/adsorbml_walkthrough-a3eb62c3780f5ae7befffa6648bdd80d.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"card","children":[{"type":"cardTitle","children":[{"type":"text","value":"Tutorial Overview","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"c8mT3Q0drz"}],"key":"SBuEotCwwE"},{"type":"table","position":{"start":{"line":18,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Property","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"wya499ZqKO"}],"key":"Ykc3JUiczg"},{"type":"tableCell","header":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Value","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"zAiXrIz9lw"}],"key":"CTD4pSoXW5"}],"key":"BkvifyLiGG"},{"type":"tableRow","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Difficulty","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"kyEKQLuKIF"}],"key":"K6TMyWnsdO"}],"key":"Td4P9LZLvU"},{"type":"tableCell","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Intermediate","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"CiJlByrKN6"}],"key":"Ul7Lpm8VMF"}],"key":"zBXJniGFz0"},{"type":"tableRow","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Time","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"SM6fhOHFty"}],"key":"vMwfhLG0v2"}],"key":"Dzs1zLgkiU"},{"type":"tableCell","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"20-30 minutes","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"BtVfC8gCRi"}],"key":"Xp6jDBn9V6"}],"key":"DmgwpL095q"},{"type":"tableRow","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"iGPzQLP13J"}],"key":"TZ738M3N2w"}],"key":"DaORsBg6cz"},{"type":"tableCell","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Basic Python, ASE","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"eRroaH6BRm"}],"key":"Hke1LiCe6X"}],"key":"qT9Mm6AE3P"},{"type":"tableRow","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Goal","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"S8C7oNJXhu"}],"key":"EApgpJmLxb"}],"key":"LH2tS0P4PF"},{"type":"tableCell","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Find optimal adsorption sites using ML-accelerated relaxations","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"hRA2AIEAAA"}],"key":"ZzUKDn9ujx"}],"key":"SH0U1dqqhT"}],"key":"RBpkfb6cU8"}],"key":"rR9sB1xKQB"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"Y6Dq7t7HK6"},{"type":"link","url":"https://arxiv.org/abs/2211.16486","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"AdsorbML","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"N3fWJm0qgd"}],"urlSource":"https://arxiv.org/abs/2211.16486","key":"F7QD19E46u"},{"type":"text","value":" paper showed that pre-trained machine learning potentials were now viable to find and prioritize the best adsorption sites for a given surface. The results were quite impressive, especially if you were willing to do a DFT single-point calculation on the best calculations.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"kezpkb2RSu"}],"key":"FqJv1t2dCK"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"The latest UMA models are now total-energy models, and the results for the adsorption energy are even more impressive (","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"a59NAPA6tj"},{"type":"link","url":"https://ai.meta.com/research/publications/uma-a-family-of-universal-models-for-atoms/","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"see the paper for details and benchmarks","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"SLZumfol92"}],"urlSource":"https://ai.meta.com/research/publications/uma-a-family-of-universal-models-for-atoms/","key":"RQp4pIqN2g"},{"type":"text","value":"). The AdsorbML package helps you with automated multi-adsorbate placement, and will automatically run calculations using the ML models to find the best sites to sample.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"wKaiikAuxe"}],"key":"yt8IJSTXDR"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Need to install fairchem-core or get UMA access or getting permissions/401 errors?","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"kIl5U4hBcv"}],"key":"Qrwrs1A4SB"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the necessary packages using pip, uv etc","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"ImKjrEmVGr"}],"key":"bOUatvxehZ"}],"key":"gCsQgf3wZj"}],"key":"gd6kfsn3k0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"! pip install fairchem-core fairchem-data-oc fairchem-applications-cattsunami","visibility":"show","key":"JcSTKXGJRg"},{"type":"outputs","id":"g72uxjcu2VM3_uDN8YJFc","children":[],"visibility":"show","key":"kzim1SZQmr"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"iyvVb2N04T"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":41,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get access to any necessary huggingface gated models","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"aeCFGGmbeb"}],"key":"kEcLAm1Mpv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":42,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get and login to your Huggingface account","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"bLgkDEuoGo"}],"key":"kpOCxlTvwV"}],"key":"dagkwqlWnn"},{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request access to ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"GS7oGpDAk4"},{"type":"link","url":"https://huggingface.co/facebook/UMA","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/facebook​/UMA","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"TfO1I59JOF"}],"urlSource":"https://huggingface.co/facebook/UMA","key":"oXkLQT2jfH"}],"key":"BVyZ4MFf72"}],"key":"LxyDwqBR3N"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a Huggingface token at ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"ADuWSCGiDn"},{"type":"link","url":"https://huggingface.co/settings/tokens/","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"https://​huggingface​.co​/settings​/tokens/","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"o73U4iUIa4"}],"urlSource":"https://huggingface.co/settings/tokens/","key":"vAKE9Wgyqy"},{"type":"text","value":" with the permission “Permissions: Read access to contents of all public gated repos you can access”","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"w4WQlxBvn1"}],"key":"UnwihfCj3U"}],"key":"GY8Ai7MD6S"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the token as an environment variable using ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"YcMN6VUSR6"},{"type":"inlineCode","value":"huggingface-cli login","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"vBbZ6ZVWM5"},{"type":"text","value":" or by setting the HF_TOKEN environment variable.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"P8mEZQm1wi"}],"key":"csEfaieY19"}],"key":"lYokgwCavN"}],"key":"E99sJwOwft"}],"key":"RgCe8nlJqH"}],"key":"cpdGPupRi6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Login using the huggingface-cli utility\n! huggingface-cli login\n\n# alternatively,\nimport os\nos.environ['HF_TOKEN'] = 'MY_TOKEN'","visibility":"show","key":"Lgnb7lNTFZ"},{"type":"outputs","id":"vlfqIDyQh4TAfn50kKc-B","children":[],"visibility":"show","key":"aOzUdzLUiJ"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"CxM8IJzTjc"}],"class":"dropdown","key":"HcgjFYPKOH"},{"type":"heading","depth":2,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"Define desired adsorbate+slab system","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"BM55Dpl0ro"}],"identifier":"define-desired-adsorbate-slab-system","label":"Define desired adsorbate+slab system","html_id":"define-desired-adsorbate-slab-system","implicit":true,"key":"GQd3OYUiq1"}],"key":"Ss8MZqzgBx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations\n\nimport pandas as pd\nfrom fairchem.data.oc.core import Bulk, Slab, Adsorbate\n\nco_molecule = molecule(\"CO\")\nadsorbate = Adsorbate(adsorbate_atoms=co_molecule, adsorbate_binding_indices=[1]) # 1 corresponds to the carbon atom\n# adsorbate = [Adsorbate(adsorbate_atoms=co_molecule, adsorbate_binding_indices=[1]) for _ in range(2)] # 2 COs\n\nbulk_src_id = \"mp-30\"\nbulk = Bulk(bulk_src_id_from_db=bulk_src_id)\nslabs = Slab.from_bulk_get_specific_millers(bulk=bulk, specific_millers=(1, 1, 1))\n\n# There may be multiple slabs with this miller index.\n# For demonstrative purposes we will take the first entry.\nslab = slabs[0]","key":"rC57RFX8fn"},{"type":"outputs","id":"mwVKx33dWaacp7ygCaNF9","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Warp DeprecationWarning: The symbol `warp.vec` will soon be removed from the public API. Use `warp.types.vector` instead.\n"},"key":"y9HZ9a4lFQ"},{"type":"output","children":[],"jupyter_data":{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mNameError\u001b[39m                                 Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[1]\u001b[39m\u001b[32m, line 6\u001b[39m\n\u001b[32m      3\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mpandas\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mas\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mpd\u001b[39;00m\n\u001b[32m      4\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mfairchem\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mdata\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01moc\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mcore\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m Bulk, Slab, Adsorbate\n\u001b[32m----> \u001b[39m\u001b[32m6\u001b[39m co_molecule = \u001b[43mmolecule\u001b[49m(\u001b[33m\"\u001b[39m\u001b[33mCO\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m      7\u001b[39m adsorbate = Adsorbate(adsorbate_atoms=co_molecule, adsorbate_binding_indices=[\u001b[32m1\u001b[39m]) \u001b[38;5;66;03m# 1 corresponds to the carbon atom\u001b[39;00m\n\u001b[32m      8\u001b[39m \u001b[38;5;66;03m# adsorbate = [Adsorbate(adsorbate_atoms=co_molecule, adsorbate_binding_indices=[1]) for _ in range(2)] # 2 COs\u001b[39;00m\n\n\u001b[31mNameError\u001b[39m: name 'molecule' is not defined","ename":"NameError","evalue":"name 'molecule' is not defined"},"key":"WPpIXSxrHN"}],"key":"wswoVKpae4"}],"key":"wo9T2PzNez"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Run heuristic/random adsorbate placement and ML relaxations","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"hnuofoWA5d"}],"identifier":"run-heuristic-random-adsorbate-placement-and-ml-relaxations","label":"Run heuristic/random adsorbate placement and ML relaxations","html_id":"run-heuristic-random-adsorbate-placement-and-ml-relaxations","implicit":true,"key":"tKuesZuugC"},{"type":"paragraph","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"Now that we’ve defined the bulk, slab, and adsorbates of interest, we can quickly use the pre-trained UMA model as a calculator and the helper script ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"GgJLeDCEpM"},{"type":"inlineCode","value":"fairchem.core.components.calculate.recipes.adsorbml.run_adsorbml","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"KM9CX04mmV"},{"type":"text","value":". More details on the automated pipeline can be found at ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"fkhLz4XD3W"},{"type":"link","url":"https://github.com/facebookresearch/fairchem/blob/main/src/fairchem/core/components/calculate/recipes/adsorbml.py#L316","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"src​/fairchem​/core​/components​/calculate​/recipes​/adsorbml​.py","key":"sKVULBEPj9"}],"urlSource":"https://github.com/facebookresearch/fairchem/blob/main/src/fairchem/core/components/calculate/recipes/adsorbml.py#L316","data":{"kind":"file","org":"facebookresearch","repo":"fairchem","reference":"main","file":"src/fairchem/core/components/calculate/recipes/adsorbml.py","from":316,"raw":"https://raw.githubusercontent.com/facebookresearch/fairchem/main/src/fairchem/core/components/calculate/recipes/adsorbml.py"},"internal":false,"protocol":"github","key":"BnH9jimTjG"},{"type":"text","value":".","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"nCsDiIxbNv"}],"key":"vUdnNfuLFP"}],"key":"CxwMEgnqgy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from ase.optimize import LBFGS\nfrom fairchem.core import FAIRChemCalculator, pretrained_mlip\nfrom fairchem.core.components.calculate.recipes.adsorbml import run_adsorbml\n\npredictor = pretrained_mlip.get_predict_unit(\"uma-s-1p1\")\ncalc = FAIRChemCalculator(predictor, task_name=\"oc20\")\n\noutputs = run_adsorbml(\n    slab=slab,\n    adsorbate=adsorbate,\n    calculator=calc,\n    optimizer_cls=LBFGS,\n    fmax=0.02,\n    steps=20,  # Increase to 200 for practical application, 20 is used for demonstrations\n    num_placements=10,  # Increase to 100 for practical application, 10 is used for demonstrations\n    reference_ml_energies=True,  # True if using a total energy model (i.e. UMA)\n    relaxed_slab_atoms=None,\n    place_on_relaxed_slab=False,\n)","key":"TdUnys7Ns5"},{"type":"outputs","id":"teeSG6I683B7SFw1_MJay","children":[],"key":"t0pmbZZjvS"}],"key":"G3nXxTh8JK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"top_candidates = outputs[\"adslabs\"]\nglobal_min_candidate = top_candidates[0]","key":"CqakQFSmq8"},{"type":"outputs","id":"MXvVewss5DYvgmNXwUWRL","children":[],"key":"vp6nAwioCy"}],"key":"JgPfIFXWQ7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"top_candidates = outputs[\"adslabs\"]\npd.DataFrame(top_candidates)","key":"CaLrIByZfa"},{"type":"outputs","id":"Mq-PC-cDFBE8RJSZr4-b2","children":[],"key":"McGwMLNTEq"}],"key":"lajIk1zzDa"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"text","value":"Write VASP input files","position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"key":"LWxjUIRtws"}],"identifier":"write-vasp-input-files","label":"Write VASP input files","html_id":"write-vasp-input-files","implicit":true,"key":"axrk1s2uyI"},{"type":"paragraph","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"If you want to verify the results, you should run VASP. This assumes you have access to VASP pseudopotentials. The default VASP flags (which are equivalent to those used to make OC20) are located in ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"szW9qyy3zo"},{"type":"inlineCode","value":"ocdata.utils.vasp","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"p4kG4ysTzz"},{"type":"text","value":". Alternatively, you may pass your own vasp flags to the ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"lguRBhFFnt"},{"type":"inlineCode","value":"write_vasp_input_files","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"IztjHeigtX"},{"type":"text","value":" function as ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"mQcrxNC4B5"},{"type":"inlineCode","value":"vasp_flags","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"yLvicgsNRE"},{"type":"text","value":". Note that to run this you need access to the VASP pseudopotentials and need to have those set up in ASE.","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"glqne9j1Z6"}],"key":"zSJC8OMNgF"}],"key":"nbixaMp5hL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\n\nfrom fairchem.data.oc.utils.vasp import write_vasp_input_files\n\n# Grab the 5 systems with the lowest energy\ntop_5_candidates = top_candidates[:5]\n\n# Write the inputs\nfor idx, config in enumerate(top_5_candidates):\n    os.makedirs(f\"data/{idx}\", exist_ok=True)\n    write_vasp_input_files(config[\"atoms\"], outdir=f\"data/{idx}/\")","visibility":"show","key":"jjG5Gzg3NA"},{"type":"outputs","id":"uOquqorhHksf1hCsTNAUR","children":[],"visibility":"show","key":"CTp0jUJnUt"}],"data":{"tags":["skip-execution"]},"visibility":"show","key":"va999beDaN"}],"key":"pIhwOOsm0s"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Expert Adsorption Energies","url":"/adsorption-energies","group":"Heterogeneous Catalysis"},"next":{"title":"Transition State Search (NEBs)","url":"/cattsunami-tutorial","group":"Heterogeneous Catalysis"}}},"domain":"http://localhost:3000"}